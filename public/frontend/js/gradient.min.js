!function(a){function b(a){this.init(a)}b.prototype={value:0,size:100,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"gradientProgressBarEasing"},animationStartValue:0,lineCap:"butt",constructor:b,el:null,canvas:null,ctx:null,barFill:null,lastFrameValue:0,init:function(b){a.extend(this,b),this.initWidget(),this.initFill(),this.draw()},initWidget:function(){var b=this.canvas=this.canvas||a("<canvas>").prependTo(this.el)[0];b.width=this.size,b.height=this.getThickness(),this.ctx=b.getContext("2d")},initFill:function(){var c=this.fill,d=this.ctx,e=this.size;if(!c)throw Error("The fill is not specified!");if(c.color&&(this.barFill=c.color),c.gradient){var f=c.gradient;if(1==f.length)this.barFill=f[0];else if(f.length>1){for(var g=c.gradientAngle||0,h=c.gradientDirection||[e/2*(1-Math.cos(g)),e/2*(1+Math.sin(g)),e/2*(1+Math.cos(g)),e/2*(1-Math.sin(g))],i=d.createLinearGradient.apply(d,h),j=0;j<f.length;j++){var k=f[j],l=j/(f.length-1);a.isArray(k)&&(l=k[1],k=k[0]),i.addColorStop(l,k)}this.barFill=i}}},draw:function(){this.animation?this.drawAnimated(this.value):this.drawFrame(this.value)},drawFrame:function(a){this.lastFrameValue=a,this.ctx.clearRect(0,0,this.size,this.getThickness()),this.drawEmptyBar(a),this.drawBar(a)},drawBar:function(a){var b=this.ctx,c=this.getThickness();b.save(),b.beginPath(),b.moveTo(0,0),b.lineTo(this.size*a,0),b.lineWidth=c,b.lineCap=this.lineCap,b.strokeStyle=this.barFill,b.stroke(),b.restore()},drawEmptyBar:function(a){var b=this.ctx,c=this.getThickness();1>a&&(b.save(),b.beginPath(),b.moveTo(0,0),b.lineTo(this.size,0),b.lineWidth=c,b.strokeStyle=this.emptyFill,b.stroke(),b.restore())},drawAnimated:function(b){var c=this,d=this.el,e=a(this.canvas);e.stop(!0,!1),d.trigger("bar-animation-start"),e.css({animationProgress:0}).animate({animationProgress:1},a.extend({},this.animation,{step:function(a){var e=c.animationStartValue*(1-a)+b*a;c.drawFrame(e),d.trigger("bar-animation-progress",[a,e])}})).promise().always(function(){d.trigger("bar-animation-end")})},getThickness:function(){return a.isNumeric(this.thickness)?this.thickness:this.size/14},getValue:function(){return this.value},setValue:function(a){this.animation&&(this.animationStartValue=this.lastFrameValue),this.value=a,this.draw()}},a.gradientProgressBar={defaults:b.prototype},a.easing.gradientProgressBarEasing=function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},a.fn.gradientProgressBar=function(c,d){var e="gradient-progress-bar",f=this.data(e);if("widget"==c){if(!f)throw Error('Calling "widget" method on not initialized instance is forbidden');return f.canvas}if("value"==c){if(!f)throw Error('Calling "value" method on not initialized instance is forbidden');if("undefined"==typeof d)return f.getValue();var g=arguments[1];return this.each(function(){a(this).data(e).setValue(g)})}return this.each(function(){var d=a(this),f=d.data(e),g=a.isPlainObject(c)?c:{};if(f)f.init(g);else{var h=a.extend({},d.data());"string"==typeof h.fill&&(h.fill=JSON.parse(h.fill)),"string"==typeof h.animation&&(h.animation=JSON.parse(h.animation)),g=a.extend(h,g),g.el=d,f=new b(g),d.data(e,f)}})}}(jQuery)